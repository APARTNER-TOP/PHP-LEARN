<!DOCTYPE html>
<html lang="uk">

<head>
   <meta charset="UTF-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>PHP Дата та час правильна робота з ним</title>
   <link rel="stylesheet" href="assets/css/style.css">

   <!-- hightlight -->
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/default.min.css">

   <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
   <!-- and it's easy to individually load additional languages -->
   <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js"></script>

   <link rel="stylesheet" href="assets/css/codeHightLight.css">
</head>

<body>
   <div class="post-content">
      <h2>PHP Дата та час правильна робота з ним</h2>
      Сьогодні ми будемо вивчати PHP та детальніше ознайомимося з тим, як працювати з датою та часом. Вивчення дати та
      часу в PHP дуже важливе для будь-якого веб-розробника, тому що це дає можливість відстежувати та зберігати
      інформацію про час створення, зміни та видалення файлів, повідомлень, статей і так далі.
      <br>
      <br>
      Перш ніж ми почнемо працювати з датою та часом в PHP, нам потрібно дізнатися, як їх формувати.<br>
      Ось детальний опис всіх форматів дати та часу, що можна використовувати в PHP:<br>
      <ol>
         <li>d - день місяця у вигляді числа (від 01 до 31)</li>
         <li>D - скорочений день тижня (наприклад, "Mon", "Tue" тощо)</li>
         <li>j - день місяця без ведучих нулів (від 1 до 31)</li>
         <li>l - повний день тижня (наприклад, "Monday", "Tuesday" тощо)</li>
         <li>N - порядковий номер дня тижня (від 1 до 7, починаючи з понеділка)</li>
         <li>S - суфікс для дня місяця (наприклад, "st", "nd", "rd" або "th")</li>
         <li>w - порядковий номер дня тижня (від 0 до 6, починаючи з неділі)</li>
         <li>z - порядковий номер дня в році (від 0 до 365)</li>
         <li>F - повний місяць (наприклад, "January", "February" тощо)</li>
         <li>m - порядковий номер місяця (від 01 до 12)</li>
         <li>M - скорочений місяць (наприклад, "Jan", "Feb" тощо)</li>
         <li>n - порядковий номер місяця без ведучих нулів (від 1 до 12)</li>
         <li>t - кількість днів у місяці (від 28 до 31)</li>
         <li>L - показник високосного року (0 або 1)</li>
         <li>o - повний рік у ISO-форматі (наприклад, "2023")</li>
         <li>Y - повний рік (наприклад, "2023")</li>
         <li>y - скорочений рік (наприклад, "23")</li>
         <li>a - антемеридіан (am або pm)</li>
         <li>A - Антемеридіан (AM або PM)</li>
         <li>g - година у 12-годинному форматі без ведучих нулів (від 1 до 12)</li>
         <li>G - година у 24-годинному форматі без ведучих нулів (від 0 до 23)</li>
         <li>h - година у 12-годинному форматі з ведучими нулями (від 01 до 12)</li>
         <li>H - година у 24-годинному форматі з ведучими нулями (від 00 до 23)</li>
         <li>i - хвилини з ведучими нулями (від 00 до 59)</li>
         <li>s - секунди з ведучими нулями (від 00 до 59)</li>
         <li>u - мікросекунди (від 000000 до 999999)</li>
         <li>e - ідентифікатор часового поясу (наприклад, "UTC", "Europe/Kiev" тощо)</li>
         <li>I - показник літнього часу (0 або 1)</li>
         <li>O - різниця з часовим поясом UTC у годинах та хвилинах (наприклад, "+0200")</li>
         <li>P - різниця з часовим поясом UTC у годинах та хвилинах з двокрапкою (наприклад, "+02:00")</li>
         <li>T - аббревіатура часового поясу (наприклад, "UTC", "EST" тощо)</li>
         <li>Z - зсув в секундах від початку епохи Unix (1 січня 1970 року)</li>
         <li>c - повна дата та час у форматі ISO 8601 (наприклад, "2023-04-26T12:00:00+02:00")</li>
         <li>r - повна дата та час у форматі RFC 2822 (наприклад, "Tue, 26 Apr 2023 12:00:00 +0200")</li>
         <li>U - кількість секунд, що пройшли з початку епохи Unix (1 січня 1970 року)</li>
         <li>v - мілісекунди з ведучими нулями (від 000 до 999)</li>
         <li>B - час у Інтернет-часі Swatch (від 000 до 999)</li>
         <li>u - мікросекунди (від 000000 до 999999) в форматі Unix</li>
      </ol>

      <a data-fancybox="gallery" href="assets/img/php-time.jpg">
         <picture>
            <source srcset="assets/img/php-time.jpg" type="image/webp"><img src="assets/img/php-time.jpg"
               alt="Директива Date.timezone" title="Директива Date.timezone" class="left">
         </picture>
      </a>
      <br>
      <br>
      <br>
      <br>
      <br>
      <br>
      <br>
      <br>
      Директива <strong>Date.timezone</strong> встановлює дату та час, яку повертатиме PHP.<br>
      <pre><code>date.timezone string</code></pre>Швидше за все час буде не вашої часової зони, оскільки за
      замовчуванням час в PHP встановлюється в UTC (не GMT).<br><br>Якщо час на сервері для Вас має значення, тоді в
      <i>php.ini</i> знайдіть та відредагуйте директиву <i>Date.timezone</i>, параметром якої вкажіть необхідну
      часову
      зону.<br><br>Наприклад, для Києва:<br>
      <pre><code>date.timezone = Europe/Kyiv</code></pre>Для Парижу це виглядає так:<br>
      <pre><code>date.timezone = Europe/Paris</code></pre>Дізнатись як правильно пишеться Ваша часова зона можна
      так:<br>
      <pre><code>print_r(DateTimeZone::listIdentifiers());</code></pre>Це видасть повний перелік часових
      зон.<br><br>Директива <i>Date.timezone</i> належить до режиму <i>PHP_INI_ALL</i>, тому значення може бути
      встановлене звідусіль.<br><br>Покладатися на цю директиву можна далеко не завжди. Часто трапляються ситуації,
      коли
      часовий пояс показує неправильний час. Наприклад, для часового поясу <i>Europe/Kiev</i> час показує
      неправильно,
      що змушує змінювати на інший часовий пояс - <i>Europe/Minsk</i>.<br><br>Щоб цієї ситуації не сталося, необхідно
      завжди самостійно контролювати час. Для цього, наприклад, можна створити змінну в окремому файлі
      конфігурації:<br>
      <pre><code>$added_time = time() + (0 * 60 * 60);</code></pre>Використання здійснювати так:<br>
      <pre><code>$thistime = date("Y-m-d H:i:s", $added_time);</code></pre>


      <br>
      Формування дати та часу
      Перш ніж ми почнемо працювати з датою та часом в PHP, нам потрібно дізнатися, як їх формувати. Для цього ми можемо
      використовувати функції date() та time().<br>
      Функція time() повертає кількість секунд, що пройшли з 1 січня 1970 року, які використовуються для представлення
      дати та часу. Функція date() дозволяє нам форматувати дату та час у різних форматах, що відповідають нашим
      потребам.
      <br>
      Наприклад, щоб отримати поточну дату та час, можна скористатися таким кодом:
      <pre>
         <code>
            $current_time = time();
            $date = date('Y-m-d H:i:s', $current_time);
            echo $date;
         </code>
      </pre>
      Цей код виведе поточну дату та час у форматі YYYY-MM-DD HH:MM:SS.
      <br>
      <br>
      Зберігання та вивід
      Іноді нам потрібно зберігати дату та час у базі даних або у файлі, щоб мати можливість відстежувати та аналізувати
      зміни в майбутньому. Для зберігання дати та часу ми можемо використовувати типи даних DATE, TIME, DATETIME або
      TIMESTAMP.<br>
      Наприклад, якщо ми хочемо зберігати дату та час у форматі YYYY-MM-DD HH:MM:SS, ми можемо використати тип даних
      DATETIME. Щоб зберегти дату та час у базі даних, ми можемо використати запит SQL:
      <pre>
         <code>
            INSERT INTO my_table (date_time_column) VALUES ('2023-04-26 12:30:00');
         </code>
      </pre>
      Цей запит додасть новий рядок у таблицю my_table зі значенням дати та часу 2023-04-26 12:30:00.
      <br>
      Для виведення дати та часу на веб-сторінці ми можемо використовувати функцію date() у поєднанні з HTML-кодом.
      Наприклад:
      <pre>
         <code>
            $current_time = time();
            $date = date('Y-m-d H:i:s', $current_time);
            echo "< p >The current date and time is: $date< / p>";
         </code>
      </pre>

      Цей код виведе поточну дату та час на веб-сторінці у форматі YYYY-MM-DD HH:MM:SS.
      <br>
      <br>
      Географічна прив'язка
      Іноді нам потрібно відстежувати дату та час не лише за часовим поясом, але й за географічним розташуванням. Для
      цього ми можемо використовувати функції date_default_timezone_set() та DateTimeZone.
      <br>
      Наприклад, якщо ми хочемо відстежувати час за географічним розташуванням Нью-Йорка, ми можемо використати
      наступний код:
      <pre>
         <code>
            date_default_timezone_set('America/New_York');
            $current_time = new DateTime();
            $date = $current_time->format('Y-m-d H:i:s');
            echo "< p >The current date and time in New York is: $date< /p >";
         </code>
      </pre>
      Цей код виведе поточну дату та час у форматі YYYY-MM-DD HH:MM:SS за годинником Нью-Йорка.
      <br>
      <br>

      Також є багато інших способів працювати з датою в PHP. Ось кілька корисних функцій та методів, які можуть
      допомогти:<br>
      strtotime() - ця функція дозволяє перетворювати рядки дати та часу в Unix Timestamp (кількість секунд, що минула з
      1 січня 1970 року). Наприклад:
      <pre>
         <code>
            $date_string = "2023-04-26 12:30:00";
            $timestamp = strtotime($date_string);
            echo $timestamp; // Виведе "1691142600"
         </code>
      </pre>

      date_diff() - цей метод класу DateTime дозволяє порівнювати дві дати та визначати різницю між ними в днях,
      годинах, хвилинах тощо. Наприклад:

      <pre>
         <code>
            $datetime1 = new DateTime('2023-04-26 12:00:00');
            $datetime2 = new DateTime('2023-04-27 13:30:00');
            $interval = $datetime1->diff($datetime2);
            echo $interval->format('%R %a days %h hours %i minutes'); // Виведе "+ 1 days 1 hours 30 minutes"
         </code>
      </pre>

      strtotime() + date() - комбінування цих двох функцій дозволяє легко форматувати дату та час у зручний формат.
      Наприклад:

      <pre>
         <code>
            $date_string = "2023-04-26 12:30:00";
            $timestamp = strtotime($date_string);
            $formatted_date = date('F j, Y \a\t g:i a', $timestamp);
            echo $formatted_date; // Виведе "April 26, 2023 at 12:30 pm"
         </code>
      </pre>

      strtotime() + strtotime() - ще один спосіб працювати з датою в PHP полягає в використанні функції strtotime()
      двічі для перетворення дати в Unix Timestamp та обчислення різниці між ними. Наприклад, щоб обчислити кількість
      днів між двома датами:


      <pre>
         <code>
            $date_string1 = "2023-04-26";
            $date_string2 = "2023-05-02";
            $timestamp1 = strtotime($date_string1);
            $timestamp2 = strtotime($date_string2);
            $days_difference = ($timestamp2 - $timestamp1) / 86400; // Кількість секунд у дні
            echo $days_difference; // Виведе "6"
         </code>
      </pre>

      strtotime() + date() - цей підхід дозволяє форматувати дату у різні формати. Наприклад:

      <pre>
         <code>
            $date_string = "2023-04-26";
            $timestamp = strtotime($date_string);
            $formatted_date = date('D, M d Y', $timestamp);
            echo $formatted_date; // Виведе "Wed, Apr 26 2023"
         </code>
      </pre>

      DateTime::createFromFormat() - цей метод дозволяє створити об'єкт DateTime з рядка дати та часу в заданому
      форматі. Наприклад:

      <pre>
         <code>
            $date_string = "26-04-2023 12:30:00";
            $datetime = DateTime::createFromFormat('d-m-Y H:i:s', $date_string);
            echo $datetime->format('Y-m-d H:i:s'); // Виведе "2023-04-26 12:30:00"
         </code>
      </pre>

      DateTimeZone - цей клас дозволяє працювати з часовими зонами та враховувати різницю у часі між різними регіонами.
      Наприклад:

      <pre>
         <code>
            $date_string = "2023-04-26 12:30:00";
            $datetime = new DateTime($date_string, new DateTimeZone('Europe/Kiev'));
            echo $datetime->format('Y-m-d H:i:s'); // Виведе "2023-04-26 12:30:00" з урахуванням часової зони
         </code>
      </pre>

      Ці інструменти дозволяють робити більш гнучкі та складні операції з датою та часом в PHP. Знання цих інструментів
      допоможе вам знайти найбільш ефективний підхід для вирішення вашої конкретної задачі з датою та часом.
      <br>
      <br>
      Надіюся, що цей урок був корисним для вас, і ви зможете успішно працювати з датою та часом у своїх PHP-проектах.
      Успіхів вам у навчанні!


   </div>
   <div class="task">
      <br>
      Завдання:<br>
      1) Повторити пройдений матеріал<br>
      <br>
      <br>
   </div>

   <script src="assets/js/app.js"></script>
</body>

</html>