https://php.apartner.pro/Urok-17.html
https://php.apartner.pro/Urok-18.html

Задача 1: Відлагодити PHP-код за допомогою Xdebug.

Опис задачі:
Ви є веб-розробником і отримали завдання розробити систему керування користувачами для веб-додатка. Ви вже написали код,
але зустрілись з проблемою, коли намагалися відлагодити його. Щоб вирішити цю проблему, ви вирішили використовувати
Xdebug - потужний інструмент для налагодження PHP-коду.

Вам потрібно знайти і виправити помилки в своєму коді, використовуючи Xdebug. Цей код відповідає за реєстрацію нових
користувачів у системі. Ваша задача полягає в тому, щоб знайти проблеми, які виникають при спробі реєстрації нового
користувача і виправити їх, використовуючи можливості Xdebug.

Опис процесу реєстрації:

Користувач відкриває сторінку реєстрації.
Користувач вводить свої дані, такі як ім'я, електронну пошту та пароль.
Користувач натискає кнопку "Зареєструватися".
Запускається PHP-код, який обробляє дані користувача.
Якщо реєстрація успішна, користувач перенаправляється на сторінку успішної реєстрації. Інакше виводиться повідомлення
про помилку.
Ви помітили, що при спробі реєстрації нового користувача щось не працює належним чином. Використовуючи Xdebug, вам
потрібно знайти причину цієї проблеми і виправити її, щоб реєстрація користувачів працювала правильно.

Вам потрібно:

Встановити та налаштувати Xdebug для вашого локального сервера.
Використовуючи Xdebug, знайти причину проблеми, що виникає при реєстрації користувачів.
Виправити помилки в коді та перевірити, що реєстрація користувачів працює належним чином.
Зверніть увагу, що вам потрібно використовувати Xdebug для знайдення причини помилок та їх виправлення, а не просто
виправити код без використання Xdebug.

Успіхів у відлагодженні!

Для тестування використовувати ці емейли user@example.com, existing@example.com, admin@example.com


Код який потрібно перевірити

Код файла index.php

<!DOCTYPE html>
<html>

<head>
    <title>Реєстрація користувача</title>
</head>

<body>
    <h2>Реєстрація нового користувача</h2>

    <form method="post" action="register.php">
        <label for="name">Ім'я:</label>
        <input type="text" id="name" name="name" required><br>

        <label for="email">Електронна пошта:</label>
        <input type="email" id="email" name="email" required><br>

        <label for="password">Пароль:</label>
        <input type="password" id="password" name="password" required><br>

        <input type="submit" value="Зареєструватися">
    </form>
</body>

</html>


Код файла register.php

<?php

function registerUser($name, $email, $password)
{
    // Перевірка валідності даних
    if (empty($name) || empty($email) || empty($password)) {
        // Генерація помилки при відсутності обов'язкових полів
        throw new Exception('Будь ласка, заповніть всі поля.');
    }

    // Перевірка, чи існує користувач з такою ж електронною поштою
    $existingUser = checkExistingUser($email);
    if ($existingUser) {
        // Генерація помилки при наявності користувача з такою ж електронною поштою
        throw new Exception('Користувач з цією електронною поштою вже існує.');
    }

    // Збереження даних нового користувача в базі даних

    // Перенаправлення на сторінку успішної реєстрації
    header("Location: success.php");
    exit();
}

function checkExistingUser($email)
{
    // Логіка перевірки наявності користувача з такою ж електронною поштою
    // Цей код необхідно додати або замінити на власний метод перевірки в базі даних

    // Приклад тимчасового коду для демонстрації помилки
    $existingUser = false;

    if ($email === 'existing@example.com') {
        $existingUser = true;
    }

    return $existingUser;
}


Код файла success.php

<!DOCTYPE html>
<html>
<head>
    <title>Успішна реєстрація</title>
</head>
<body>
    <h2>Ви успішно зареєстровані!</h2>

    <p>Дякуємо за реєстрацію. Ви можете увійти в систему, використовуючи свої облікові дані.</p>
</body>
</html>



Задача 2:

Вам потрібно створити функцію, яка приймає рядок у форматі дати і повертає об'єкт класу DateTime, створений з використанням DateTime::createFromFormat().

Напишіть функцію convertToDateTime(), яка приймає один параметр - рядок, що представляє дату у певному форматі.
У тілі функції використайте метод DateTime::createFromFormat() для створення об'єкту DateTime з переданого рядка. Використовуйте відповідний формат дати у параметрі format.
Перевірте, чи вдалося успішно створити об'єкт DateTime. Якщо ні, викиньте виключення з повідомленням про помилку.
Поверніть створений об'єкт DateTime у відповіді з функції.

Задача 3:

Вам потрібно написати функцію, яка приймає рядок, що представляє дату у певному форматі, та повертає дату у форматі "d.m.Y", використовуючи функції strtotime() та date().

Напишіть функцію convertDate(), яка приймає один параметр - рядок, що представляє дату у певному форматі.
У тілі функції використайте функцію strtotime() для перетворення рядка дати на тимчасовий мітчик UNIX.
Перевірте, чи вдалося успішно перетворити рядок дати. Якщо ні, викиньте виключення з повідомленням про помилку.
Використайте функцію date() для форматування дати з отриманого мітчика UNIX у формат "d.m.Y".
Поверніть сформатовану дату у відповіді з функції.

Задача 4:

Вам потрібно написати функцію, яка приймає дві дати та обчислює різницю між ними в днях, використовуючи функцію date_diff().

Напишіть функцію calculateDateDifference(), яка приймає два параметри - початкову дату та кінцеву дату.
У тілі функції створіть об'єкти DateTime для початкової та кінцевої дати.
Використайте функцію date_diff() для обчислення різниці між цими двома датами.
Отримайте значення різниці в днях з отриманого об'єкту DateInterval.
Поверніть значення різниці в днях у відповіді з функції.

Задача 5:

Вам потрібно написати функцію, яка встановлює задану часову зону за допомогою функції date_default_timezone_set() і повертає поточну дату та час у цій часовій зоні.

Напишіть функцію getCurrentDateTime(), яка не приймає жодних параметрів.
У тілі функції використайте функцію date_default_timezone_set() для встановлення часової зони на 'America/New_York'.
Використайте функцію date() для отримання поточної дати та часу у встановленій часовій зоні.
Поверніть поточну дату та час у відповіді з функції.

Задача 6:

Вам потрібно написати функцію, яка приймає рядок, що представляє дату у певному форматі, та повертає дату в іншому форматі, використовуючи функції strtotime() та date().

Напишіть функцію convertDateFormat(), яка приймає два параметри - рядок дати в початковому форматі та формат, до якого потрібно перетворити дату.
У тілі функції використайте функцію strtotime() для перетворення рядка дати в тимчасовий мітчик UNIX.
Перевірте, чи вдалося успішно перетворити рядок дати. Якщо ні, викиньте виключення з повідомленням про помилку.
Використайте функцію date() для форматування дати з отриманого мітчика UNIX у вказаний формат.
Поверніть сформатовану дату у відповіді з функції.

Задача 7:

Вам потрібно написати функцію, яка приймає дату, час та часову зону і повертає дату та час у вказаній часовій зоні, використовуючи клас DateTimeZone та DateTime.

Напишіть функцію convertToTimezone(), яка приймає три параметри - дату, час та часову зону (рядок, що представляє часову зону).
У тілі функції створіть об'єкт DateTime з переданою датою та часом.
Створіть об'єкт DateTimeZone з переданою часовою зоною.
Використовуйте метод setTimezone() об'єкту DateTime для встановлення нової часової зони.
Поверніть перетворену дату та час у відповіді з функції.


відповідь 2:

function convertToDateTime($dateString) {
    $format = 'Y-m-d'; // Встановіть потрібний формат дати
    
    $dateTime = DateTime::createFromFormat($format, $dateString);
    
    if ($dateTime === false) {
        throw new Exception('Недійсний формат дати');
    }
    
    return $dateTime;
} 

відповідь 3:

function convertDate($dateString) {
    $timestamp = strtotime($dateString);
    
    if ($timestamp === false) {
        throw new Exception('Недійсний формат дати');
    }
    
    $formattedDate = date('d.m.Y', $timestamp);
    
    return $formattedDate;
}

відповідь 4:

function calculateDateDifference($startDate, $endDate) {
    $startDateTime = new DateTime($startDate);
    $endDateTime = new DateTime($endDate);
    
    $interval = date_diff($startDateTime, $endDateTime);
    
    return $interval->days;
}

відповідь 5:

function getCurrentDateTime() {
    date_default_timezone_set('America/New_York');
    
    $currentDateTime = date('Y-m-d H:i:s');
    
    return $currentDateTime;
}

відповідь 6:

function convertDateFormat($dateString, $outputFormat) {
    $timestamp = strtotime($dateString);
    
    if ($timestamp === false) {
        throw new Exception('Недійсний формат дати');
    }
    
    $formattedDate = date($outputFormat, $timestamp);
    
    return $formattedDate;
}


відповідь 7:

function convertToTimezone($date, $time, $timezone) {
    // Створення об'єкту DateTime з переданою датою та часом
    $datetime = new DateTime($date . ' ' . $time);
    
    // Створення об'єкту DateTimeZone з переданою часовою зоною
    $timezoneObject = new DateTimeZone($timezone);
    
    // Встановлення нової часової зони
    $datetime->setTimezone($timezoneObject);
    
    // Повернення перетвореної дати та часу
    return $datetime->format('Y-m-d H:i:s');
}

// Приклад виклику функції
$date = '2023-05-22';
$time = '15:30:00';
$timezone = 'Europe/Kiev';
$result = convertToTimezone($date, $time, $timezone);

echo $result;